---
title: Workbot dynamic menus
date: 2019-06-1- 10:23:00 Z
---

# Dynamic menus
![How dynamic menus work](~@img/workbot/workbot/how-dynamic-menus-work.png)
*Overview*

In Workbot command recipes that invoke dialogs, a `select` field can be defined with dynamic menu options that become available at runtime.

![Dynamic menu](~@img/workbot/workbot-trigger/dynamic-menu.png/)
*A Workbot command recipe with dynamic menu options*

![Menu options at runtime](~@img/workbot/workbot/menu-options-runtime.gif)
*Menu options generated at runtime*

The dynamic menu options are generated by a secondary 'Dynamic menu recipe'. As its name suggests, this recipe handles 3 important things:

1. Monitors for dynamic menu events from dynamic menus in dialogs,
2. Generates menu options, and
3. Returns the menu options to the primary command recipe.

## Configuring a Workbot parameter with dynamic menu options
In a Workbot command recipe,

1. Create a parameter
2. Under **Dialog control type**, choose **Select**.
3. Under **Menu options**, choose **Dynamic**.
4. Under dynamic menu recipe, enter the recipe ID of the dynamic menu recipe responsible for generating the menu options. At this point, you must have already created a dynamic menu recipe. To learn more about dynamic menu recipes, jump to [Dynamic menu recipes](#dynamic-menu-recipes).
5. (Optional) If you want to send more context to the dynamic menu recipe, you can pass parameters to it using the **Dynamic menu recipe params** field. Learn more in the [New dynamic menu event trigger](/workbot/workbot-triggers.md#command-input-fields) documentation.

![Dynamic menu](~@img/workbot/workbot-trigger/dynamic-menu.png/)
*A Workbot command recipe with dynamic menu options*

When a user types in a dynamic menu field in a dialog, an event is sent to the dynamic menu recipe.

![Menu options at runtime](~@img/workbot/workbot/menu-options-runtime.gif)
*Menu options generated at runtime*

## Configuring a Workbot parameter with dynamic menu options in a Post dialog action
You can also configure a dynamic menu field in a **Post dialog** action. Under **Dialog form fields**, configure your JSON like the following:

```
[
  {
    "type": "select",
    "name": "your_parameter",
    "label": "Your parameter",
    "optional": false,
    "data_source": "external",
    "dynamic_menu_recipe":  "28748",
    "dynamic_menu_recipe_params": "stagename: Closed Won",
    "min_query_length": 3
  }
]
```

![Configuring dynamic menu in a Post dialog action](~@img/workbot/workbot/dynamic-menu-post-dialog.png)
*Configuring a dynamic menu field using JSON*

<table class="unchanged rich-diff-level-one">
    <thead>
        <tr>
            <th>Field</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>type</td>
            <td>
              Type of field for this parameter. Use <code>select</code> for drop-down menus (including dynamic menus).
            </td>
        </tr>
        <tr>
            <td>name</td>
            <td>
              API name of the parameter, e.g. <code>stagename</code>.
            </td>
        </tr>
        <tr>
            <td>label</td>
            <td>Display name of the parameter, e.g. <b>Stage name</b>.
            </td>
        </tr>
        <tr>
            <td>optional</td>
            <td>
              If <b>true</b>, user is able to skip this field and submit the dialog.
            </td>
        </tr>
        <tr>
            <td>data_source</td>
            <td>
              Required by Slack for fields with dynamic menus. Value must be <code>external</code>.
            </td>
        </tr>
        <tr>
            <td>dynamic_menu_recipe</td>
            <td>
              ID of the dynamic menu recipe that generates and returns the dynamic menu options back to this recipe.
            </td>
        </tr>
        <tr>
            <td>dynamic_menu_recipe params</td>
            <td>
              Pass context to the dynamic menu recipe using comma-separated parameters, e.g. <br><pre>
              <code>stagename: Closed Won, closed: true</code></pre>
            </td>
        </tr>
        <tr>
            <td>min_query_length</td>
            <td>
              Number of characters that must be typed by the user before an event is sent to the dynamic menu recipe.
            </td>
        </tr>
    </tbody>
</table>

## Dynamic menu recipes
Dynamic menu recipes handle 3 important things:

1. **Monitor** for dynamic menu events from dynamic menus in dialogs,
2. **Generates** menu options, and
3. **Returns** the menu options to the primary command recipe.

A typical dynamic menu recipes consist:

1. [New dynamic menu event](/workbot/workbot-triggers.md#new-dynamic-menu-event) trigger
2. An action that searches and retrieves records from an app (e.g. Salesforce). The search query is typically refined by using the 'typeahead' `Value` datapill from the **New dynamic menu event** trigger output.
Since a dynamic menu event occurs when a user types 3 characters into a dynamic menu field, the 'typeahead' `Value` datapill contains the 3 (or more) characters typed by the user.
![Using `typeahead` to refine search](~@img/workbot/workbot/using-typeahead-to-refine-search.png)
*Using typeahead to refine search*

3. [Return menu options](/workbot/workbot-actions.md#return-menu-options) action

![Typical dynamic menu recipe](~@img/workbot/workbot/typical-dynamic-menu-recipe.png)
*A typical dynamic menu recipe*

## Setting up dynamic menu capabilities in custom Workbots
If you are using a custom bot, you will need to configure the **Options Load URL** of your bot in Slack first. This is the URL where Workato receives dynamic menu events for Workbot.

In your Slack app configuration page, go to:
> **Features > Interactive Components > Message Menus**

In the **Options Load URL**, key in a URL in this format:
> https://www.workato.com/slack_webhooks/data_source?coak_id=1234

where '1234' is your bot's custom OAuth ID. This ID can be found in the URL of your bot's custom OAuth profile.

![Custom OAuth ID](~@img/workbot/workbot/custom-oauth-id.png)

## Related topics
- [New dynamic menu event](/workbot/workbot-triggers.md#new-dynamic-menu-event)
- [Return menu options](/workbot/workbot-actions.md#return-menu-options)
